<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Xuyên qua mọi chiến tuyến — Nguyễn Xuân Thọ</title>

  <!-- Fonts: STIX Two Text (title), Merriweather (body), Inter (UI/buttons) -->
  <link href="https://fonts.googleapis.com/css2?family=STIX+Two+Text:wght@400;600;700&family=Merriweather:wght@300;400;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#FBF5EE;
      --accent:#7a4b2b;
      --muted:#9b7b63;
      --card:#fff8f2;
      --shadow: rgba(122,75,43,0.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: 'Merriweather', serif;
      background: radial-gradient(circle at 10% 10%, rgba(255,244,234,0.6), transparent 20%), var(--bg);
      color:#35241a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.5;
    }
    .container{max-width:1100px;margin:48px auto;padding:24px}

    /* Section spacing updated */
    .section{
      background:var(--card);
      padding:20px;
      border-radius:10px;
      box-shadow:0 8px 20px var(--shadow);
      margin-top:44px;
      margin-bottom:44px;
    }

    /* hero */
    .hero{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:center}
    .cover-wrap{display:flex;justify-content:center}

    .book-cover{
      width:320px;max-width:90%;
      box-shadow:0 12px 30px var(--shadow);
      border-radius:6px;
      border:1px solid rgba(0,0,0,0.04);
      background:linear-gradient(180deg,#fffaf6, #efe2d7);
      padding:18px;
      position:relative;
      overflow:hidden;
      transform:rotate(-1deg);
    }
    .book-cover .band{
      position:absolute;left:-40px;top:30px;
      transform:rotate(-18deg);
      background:linear-gradient(90deg,#7a4b2b,#a66b3c);
      color:#fff;padding:8px 80px;font-weight:700;letter-spacing:1px;opacity:0.95
    }
    .book-cover svg{display:block;width:100%;height:auto}

    .hero-text h1{
      font-family:'STIX Two Text', serif;
      font-size:36px;
      text-align:center;
      margin:0 0 8px;
      color:var(--accent)
    }
    .hero-text .quote{
      font-style:italic;color:var(--muted);
      margin:12px 0;padding-left:12px;
      border-left:4px solid rgba(122,75,43,0.12)
    }
    .author{
      margin-top:0px;
      font-weight:700;
      font-family:'Merriweather', serif;
      text-align:right;
    }

    .cards-row{display:flex;gap:18px;align-items:stretch}
    .card{
      flex:1;background:var(--card);
      padding:20px;border-radius:10px;
      box-shadow:0 8px 20px var(--shadow);
      display:flex;flex-direction:column
    }
    .card h3{font-family:'STIX Two Text', serif;margin:0 0 8px;text-align:center;font-size:24px;}
    .card .card-body{flex:1;overflow:auto}

    /* FIX: author-photo sizing so it doesn't expand and cover content */
    .about{display:grid;grid-template-columns:120px 1fr;gap:18px;align-items:start}
    .author-photo{
      width:120px;
      height:120px;
      min-width:120px;
      border-radius:6px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,0.06);
      background:#efe0d2;
      display:block;
      flex-shrink:0;
    }
    .author-photo img{
      display:block;
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .toc{max-height:320px;overflow:auto;padding-right:8px}
    .toc ul{margin:0;padding:0 8px;list-style:none}
    .toc li{padding:8px 0;border-bottom:1px dashed rgba(122,75,43,0.06)}

    /* make toc-preview clearly interactive */
    .toc-preview{cursor:pointer;color:var(--accent);text-decoration:underline}
    .toc-preview:hover{color:var(--accent);text-decoration:underline}

    /* ALBUM SECTION (NEW SEPARATE SECTION) */
    .albums-section{
      background:var(--card);
      padding:26px;
      border-radius:12px;
      box-shadow:0 8px 20px var(--shadow);
      margin-top:44px;
      margin-bottom:44px;
    }

    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:60} .modal.open{display:flex} .modal-content{width:90%;max-width:1000px;background:#fff;border-radius:8px;padding:16px;display:flex;gap:12px;box-shadow:0 20px 60px rgba(0,0,0,0.4)} .preview-main{flex:2;display:flex;align-items:center;justify-content:center} .preview-main img{max-width:100%;max-height:70vh;border-radius:6px} .preview-thumbs{flex:1;overflow:auto;display:flex;flex-direction:column;gap:8px;padding:6px} .preview-thumbs img{width:100%;height:80px;object-fit:cover;border-radius:6px;cursor:pointer;opacity:0.9} .modal-close{position:absolute;top:18px;right:18px;background:#fff;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer}

    .section-heading{
      font-size:32px;
      font-family:'STIX Two Text', serif;
      text-align:center;
      margin:0 0 10px;
      color:var(--accent);
    }

    .albums-sub{
      text-align:center;
      color:var(--muted);
      margin:0 0 20px;
      font-size:15px;
    }

    .albums{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:18px;
      margin-top:12px;
    }
    .album{
      background:#f7efe6;
      border-radius:10px;
      padding:16px;
      cursor:pointer;
      min-height:120px;
      border:1px solid rgba(122,75,43,0.06);
      display:flex;flex-direction:column;gap:8px
    }
    .album .title{
      font-weight:700;color:var(--accent);
      font-family:'STIX Two Text', serif
    }
    .album .meta{
      font-size:14px;color:var(--muted);
      font-family:'Merriweather', serif
    }

    /* Floating pre-read card */
    .float-card{
      position:fixed;
      right:20px;
      bottom:20px;
      width:360px;
      max-width:calc(100% - 40px);
      background:#fffdfb;
      border:1px solid rgba(122,75,43,0.12);
      box-shadow:0 18px 40px rgba(0,0,0,0.25);
      border-radius:12px;
      padding:14px;
      transform:translateY(14px) scale(0.98);
      opacity:0;
      transition:all .18s ease;
      z-index:80;
      display:flex;
      flex-direction:column;
      gap:8px;
      pointer-events:none;
    }
    .float-card.open{transform:translateY(0) scale(1);opacity:1;pointer-events:auto}
    .float-head{display:flex;align-items:center;justify-content:space-between}
    .float-head h4{margin:0;font-size:16px;color:var(--accent);font-family:'STIX Two Text',serif}
    .float-body{font-size:14px;color:var(--muted);max-height:240px;overflow:auto;line-height:1.45}
    .float-foot{display:flex;justify-content:space-between;align-items:center;margin-top:6px}
    .close-x{background:transparent;border:0;font-size:18px;cursor:pointer;color:var(--muted)}

    /* checkout */
    .checkout{display:flex;gap:14px;align-items:center;justify-content:space-between;margin-top:24px}
    .price{font-size:22px;font-weight:700;color:var(--accent);font-family:'STIX Two Text', serif}
    .btn-primary{
      background:linear-gradient(180deg,#8b5a3c,#6e4429);
      color:#fff;padding:12px 20px;border-radius:8px;
      text-decoration:none;font-weight:700;
      font-family:'Inter',sans-serif;
      box-shadow:0 8px 18px rgba(110,68,41,0.12)
    }

    @media (max-width:880px){
      .hero{grid-template-columns:1fr;}
      .cards-row{flex-direction:column}
      .checkout{flex-direction:column;align-items:flex-start}
      .float-card{right:12px;left:12px;width:auto}
      .about{grid-template-columns:80px 1fr}
      .author-photo{width:80px;height:80px;min-width:80px}
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- HERO -->
    <section class="hero" aria-labelledby="book-title">
      <div class="cover-wrap">
        <figure class="book-cover" aria-hidden="true">
          <div class="band">TẬP I</div>
          <!-- COVER SVG KEPT UNCHANGED -->
          <svg viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
            <defs><linearGradient id="g1" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#f8efe3"/><stop offset="1" stop-color="#e9dacb"/></linearGradient></defs>
            <rect width="100%" height="100%" fill="url(#g1)" />
            <rect x="18" y="18" width="364" height="564" fill="none" stroke="#b88a6a" stroke-width="4" rx="6"/>
            <g transform="translate(40,120)">
              <text x="0" y="0" font-family="Playfair Display" font-size="36" fill="#5b3a2b">Tên cuốn sách</text>
              <text x="0" y="50" font-family="Libre Baskerville" font-size="16" fill="#6f4e3a">Một hành trình xuyên thời gian</text>
            </g>
            <g transform="translate(200,360)" fill="#7a4b2b"><path d="M0-20 C10 -40, 40 -40, 50 -20 C40 -10, 10 -10, 0 -20 Z"/></g>
            <text x="24" y="560" font-family="Libre Baskerville" font-size="14" fill="#7a4b2b">Tác giả: Họ Tên</text>
          </svg>
        </figure>
      </div>

      <div class="hero-text">
        <h1 id="book-title">Xuyên qua mọi chiến tuyến — Ký sự tư liệu</h1>
        <p class="quote">"Chiến tranh là cái lò tạo ra hận thù, giết chóc. Nhưng chiến tranh cũng là thước đo cho tình người ở mức cao nhất."</p>
        <p class="author">Nguyễn Xuân Thọ • 2025</p>
        <p style="margin-top:18px">Một tập ký sự tư liệu dựa trên hồi ức nhân chứng, nhật ký và cuộc gặp gỡ xuyên quốc gia — từ những trang nhật ký Đặng Thùy Trâm đến câu chuyện của những người mẹ, những người lính, và nỗ lực hòa giải dân tộc.</p>
      </div>
    </section>

    <!-- SECTION 2: ABOUT + TOC -->
    <section class="section" aria-labelledby="section-2">
      <h3 class="section-heading">Giới thiệu</h3>

      <div class="cards-row">

        <!-- ABOUT AUTHOR -->
        <div class="card">
          <div class="card-head">
            <h3>Về tác giả</h3>
            <div style="color:var(--muted);font-size:13px;text-align:center;margin-top:6px">Nguyễn Xuân Thọ — ký giả &amp; tác giả của tập ký sự tư liệu</div>
          </div>
          <div class="card-body">
            <div class="about">
              <div class="author-photo" aria-hidden="true">
                <!-- Small placeholder svg scaled to box -->
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'><rect width='100%' height='100%' fill='%23efe0d2'/><text x='50%' y='48%' dominant-baseline='middle' text-anchor='middle' font-family='Merriweather' font-size='28' fill='%237a4b2b'>Nguyễn Xuân</text><text x='50%' y='62%' dominant-baseline='middle' text-anchor='middle' font-family='Merriweather' font-size='28' fill='%237a4b2b'>Thọ</text></svg>">
              </div>
              <div class="bio">
                <p>Nguyễn Xuân Thọ sinh sống và làm việc tại Châu Âu — cuốn sách được hoàn thành tại Cologne tháng 12/2024, với nhiều chương gửi nhân chứng đối chiếu.</p>
                <p style="margin-top:8px;color:var(--muted);font-size:13px">Liên hệ: nxb.tttt@mst.gov.vn • ISBN 978-604-45-1887-9</p>
              </div>
            </div>
          </div>
        </div>

        <!-- TOC -->
        <div class="card">
          <div class="card-head">
            <h3>Mục lục</h3>
          </div>
          <div class="card-body">
            <nav class="toc" aria-label="Mục lục">
              <ul>
                <li><strong>Lời giới thiệu</strong></li>
                <li><strong>Chương 1 — Những quyển sổ thất lạc</strong>
                  <ul>
                    <li id="toc-dieu-ky-dieu" class="toc-preview">1. Điều kỳ diệu — trang 5 (PREVIEW AVAILABLE)</li>
                    <li>2. Đi tìm Thùy — trang 21</li>
                    <li>3. Bộ nhật ký hồi hương — trang 34</li>
                    <li>4. Tấm lòng người mẹ — trang 40</li>
                    <li>5. Những thân phận buồn — trang 45</li>
                    <li>6. Kẻ thù cũng là người — trang 54</li>
                  </ul>
                </li>
                <li><strong>Chương 2 — Chuyện những người lính</strong></li>
                <li><strong>Chương 3 — Ông Việt Cộng gốc Đức</strong></li>
                <li><strong>Chương 4 — Những người mẹ</strong></li>
                <li><strong>Chương 5 — Ngôi nhà Đức Bảo</strong></li>
                <li><strong>Chương 6 — Erwin Borchers</strong></li>
              </ul>
            </nav>
          </div>
        </div>

      </div>
    </section>

    <!-- SECTION 3: THƯ VIỆN (NEW) -->
    <section class="albums-section" id="thu-vien">
      <h3 class="section-heading">Thư viện</h3>
      <p class="albums-sub">Hình ảnh minh họa: bản đồ cổ, trang sách chọn lọc và tư liệu hiện trường.</p>

      <div class="albums" id="albums">
        <div class="album" data-images='["map01","map02","map03"]'>
          <div class="title">Tư liệu</div>
          <div class="meta">12 ảnh</div>
        </div>

        <div class="album" data-images='["page01","page02","page03","page04"]'>
          <div class="title">Ra mắt sách Tp.HCM</div>
          <div class="meta">24 ảnh</div>
        </div>

        <div class="album" data-images='["docs01","docs02"]'>
          <div class="title">Ra mắt sách Hà Nội</div>
          <div class="meta">8 ảnh</div>
        </div>
      </div>
      
      <!-- Checkout (kept inside albums section as before) -->
      <div class="checkout" style="margin-top:28px">
        <div>
          <div style="font-size:13px;color:var(--muted)">Giá bìa</div>
          <div class="price">₫229,000</div>
        </div>
        <a class="btn-primary" href="#checkout">Mua ngay</a>
      </div>
    </section>

    <!-- FOOTER -->
    <footer style="text-align:center;color:var(--muted);font-size:13px">
      © 2025 Nguyễn Xuân Thọ • XUYÊN QUA MỌI CHIẾN TUYẾN
    </footer>

  </div>

  <!-- FLOATING PRE-READ CARD (hidden by default) -->
  <div id="floatCard" class="float-card" role="dialog" aria-hidden="true" aria-labelledby="floatTitle">
    <div class="float-head">
      <h4 id="floatTitle">Pre-read — "Điều kỳ diệu" (tr.5)</h4>
      <button id="closeFloat" class="close-x" aria-label="Đóng">✕</button>
    </div>
    <div class="float-body" id="floatBody">
      <!-- Sample excerpt; replace with real excerpt from your file -->
      <p><strong>Sự tồn tại của bộ nhật ký được tôi coi là điều kỳ diệu của tình người.</strong></p>
      <p>Hy vọng những tư liệu sống này giúp thế hệ hôm nay hiểu lịch sử một cách trung thực, thấy được góc khuất chiến tranh và nỗi lòng của người trong cuộc.</p>
      <p style="margin-top:8px;color:var(--muted);font-size:12px">Trích: Chương 1 — Điều kỳ diệu (Trang 5).</p>
    </div>
    <div class="float-foot">
      <a id="readMoreBtn" class="btn-primary" href="#toc-dieu-ky-dieu" style="background:#7a4b2b">Mua bản in</a>
    </div>
  </div>

  <!-- OPTIONAL: Simple album preview modal (placeholders) -->
  <div id="modal" class="modal" role="dialog" aria-hidden="true" style="display:none;">
    <div class="modal-close" id="modal-close" title="Đóng" style="position:absolute;top:18px;right:18px;background:#fff;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer">✕</div>
    <div class="modal-content" style="display:flex;gap:12px;align-items:flex-start;max-width:1000px;">
      <div class="preview-main" style="flex:2;display:flex;align-items:center;justify-content:center;">
        <img id="preview-img" src="" alt="Preview" style="max-width:100%;max-height:70vh;border-radius:6px">
      </div>
      <div id="preview-thumbs" class="preview-thumbs" style="flex:1;display:flex;flex-direction:column;gap:8px;padding:6px;overflow:auto"></div>
    </div>
  </div>

  <script>
    /* ---------- Floating pre-read logic ---------- */
    const floatCard = document.getElementById('floatCard');
    const closeFloat = document.getElementById('closeFloat');
    const readMoreBtn = document.getElementById('readMoreBtn');

    function openFloat() {
      floatCard.classList.add('open');
      floatCard.setAttribute('aria-hidden','false');
      // focus first actionable control for accessibility
      closeFloat.focus();
    }
    function closeFloatFn() {
      floatCard.classList.remove('open');
      floatCard.setAttribute('aria-hidden','true');
    }

    // attach ESC key to close
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && floatCard.classList.contains('open')) closeFloatFn();
    });

    closeFloat.addEventListener('click', closeFloatFn);

    // attach TOC item(s) to open float
    const tocPreview = document.getElementById('toc-dieu-ky-dieu');
    if(tocPreview){
      tocPreview.addEventListener('click', (e)=>{
        e.preventDefault && e.preventDefault();
        openFloat();
      });
      tocPreview.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') openFloat(); });
    }

    // if "Đọc tiếp chương 1" clicked, close float and scroll to TOC item
    readMoreBtn.addEventListener('click', (e)=>{
      // default anchor behavior will jump; ensure float closes and smooth scroll
      e.preventDefault();
      closeFloatFn();
      const target = document.getElementById('toc-dieu-ky-dieu');
      if(target) target.scrollIntoView({behavior:'smooth', block:'center'});
    });

    // close float when clicking outside it
    document.addEventListener('click', (e)=>{
      if(!floatCard.contains(e.target) && !e.target.classList.contains('toc-preview') && floatCard.classList.contains('open')){
        closeFloatFn();
      }
    });

    /* ---------- Album preview (simple placeholders) ---------- */
    const albums = document.querySelectorAll('.album');
    const modal = document.getElementById('modal');
    const modalClose = document.getElementById('modal-close');
    const previewImg = document.getElementById('preview-img');
    const previewThumbs = document.getElementById('preview-thumbs');

    function svgDataUrl(text, w=1200, h=800){
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}'><rect width='100%' height='100%' fill='%23efe2d1'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Merriweather, serif' font-size='48' fill='%237a4b2b'>${text}</text></svg>`;
      return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
    }

    function openAlbum(images){
      if(!modal) return;
      previewThumbs.innerHTML = '';
      images.forEach((id, idx)=>{
        const img = document.createElement('img');
        img.src = svgDataUrl(id,400,300);
        img.alt = id;
        img.tabIndex = 0;
        img.style.width = '100%';
        img.style.height = '80px';
        img.style.objectFit = 'cover';
        img.style.borderRadius = '6px';
        img.style.cursor = 'pointer';
        img.addEventListener('click', ()=> setPreview(idx));
        img.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') setPreview(idx); });
        previewThumbs.appendChild(img);
      });
      setPreview(0);
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden','false');
    }

    function setPreview(index){
      const thumbs = Array.from(previewThumbs.querySelectorAll('img'));
      if(thumbs.length===0) return;
      const sel = thumbs[index];
      previewImg.src = sel.src;
      // highlight selected
      thumbs.forEach(t=>t.style.opacity = '0.6');
      sel.style.opacity = '1';
      sel.scrollIntoView({block:'nearest',behavior:'smooth'});
    }

    albums.forEach(a=>{
      a.addEventListener('click', ()=>{
        const raw = a.getAttribute('data-images');
        let imgs = [];
        try{ imgs = JSON.parse(raw);}catch(e){ imgs = []; }
        const labels = imgs.map(id=> id.replace(/\W/g,' ').toUpperCase());
        openAlbum(labels);
      });
      a.addEventListener('keydown',(e)=>{ if(e.key === 'Enter') a.click(); });
    });

    if(modalClose){
      modalClose.addEventListener('click', ()=>{ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); });
    }
    if(modal){
      modal.addEventListener('click', (e)=>{ if(e.target === modal) { modal.style.display='none'; modal.setAttribute('aria-hidden','true'); } });
    }
    document.addEventListener('keydown',(e)=>{ if(e.key === 'Escape'){ if(modal) { modal.style.display='none'; modal.setAttribute('aria-hidden','true'); } } });

  </script>
 </body>
</html>
